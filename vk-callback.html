<!DOCTYPE html>
<meta charset="utf-8">
<title>VK callback</title>
<script>
/*   Страница получает ?code=… от VK
     Отправляем его в окно-родитель и закрываемся              */
(function () {
  const params = new URLSearchParams(location.search);
  const code   = params.get('code');
  if (code && window.opener) {
    window.opener.postMessage(
      { type:'LOGIN_SUCCESS', detail:{ code } },
      '*'                       // свой домен → https://sweet-…
    );
  }
  document.body.textContent = 'Авторизация завершена…';
  setTimeout(() => window.close(), 400);
})();
</script>
