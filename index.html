<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VK One-Tap Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://unpkg.com/@vkid/sdk@2.6.0/dist-sdk/umd/index.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Inter:700,400&display=swap" rel="stylesheet">
  <style>/* ­— ваши стили “коробки”, оставил без изменений — */</style>
</head>
<body>
  <div class="wrap">
    <div class="box">
      <h1>Вход через VK</h1>
      <div id="vk_container"></div>
      <div id="msg">Нажмите <b>«Войти с VK ID»</b>, а затем подтвердите вход</div>
    </div>
  </div>

<script>
const APP_ID     = 54008517;
const REDIRECT   = 'https://sweet-twilight-63a9b6.netlify.app/vk-callback.html';

document.addEventListener('DOMContentLoaded', () => {
  const VKID = window.VKIDSDK;

  /* только инициализация — без login-listener */
  VKID.Config.init({
    app: APP_ID,
    redirectUrl: REDIRECT,
    source: VKID.ConfigSource.ONE_TAP
  });

  new VKID.OneTap().render({
    container: document.getElementById('vk_container'),
    scheme: 'dark',
    showAlternativeLogin: false
  })
  .on(VKID.WidgetEvents.ERROR, e => {
    document.getElementById('msg').textContent =
      e?.text || 'Ошибка авторизации, попробуйте ещё раз';
  });
});
</script>
</body>
</html>
