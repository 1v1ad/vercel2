
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>VK One Tap Login</title>
  <script src="https://unpkg.com/@vkid/sdk@2.10.0/dist-sdk.umd/index.js"></script>
</head>
<body>
  <div class="header" style="background: #0077FF; color: white; padding: 10px;">VK One Tap Login</div>
  <div id="vk_container" style="margin-top: 40px; text-align: center;"></div>
  <p style="text-align: center;">или войти через VK ID с использованием данных из сервиса</p>

  <script>
    window.VKID.Config.set({
      app: 53969710,
      redirectUrl: window.location.origin + "/vk-callback.html",
    });

    window.VKID.Widgets.OneTapButton("vk_container", {
      callback: (response) => {
        console.log("VK One Tap callback:", response);
        if (response.status === 'ok' && response.user) {
          const userData = encodeURIComponent(JSON.stringify(response.user));
          window.location.href = "/vk-callback.html?user=" + userData;
        } else {
          alert("Ошибка авторизации через VK");
        }
      }
    });
  </script>
</body>
</html>
