<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VK One Tap Login</title>
  <script src="https://unpkg.com/@vkid/sdk@2.10.0/dist-sdk/umd/index.js"></script>
</head>
<body>
  <div class="header" style="background-color: #0077FF; padding: 10px;">
    <b style="color: white;">VK One Tap Login</b>
  </div>
  <div class="container" style="margin-top: 30px; text-align: center;">
    <div id="vk_id_signin"></div>
    <p>или войти через VK ID с использованием данных из сервиса</p>
  </div>
  <script>
    const authConfig = {
      clientId: '53969710',
      redirectUri: window.location.origin + '/vk-callback.html'
    };

    const VKID = window.VKIDSDK;
    VKID.Config.set(authConfig);
    VKID.Widgets.OneTapButton.init({
      mountEl: document.getElementById('vk_id_signin'),
      style: 'primary',
      callback: ({ type, payload }) => {
        if (type === 'AUTH_SUCCESS') {
          const { code, device_id } = payload;
          window.location.href = `/vk-callback.html?code=${code}&device_id=${device_id}`;
        }
      }
    });
  </script>
</body>
</html>
