# GGRoom — Admin2 map (frontend)

Этот файл — «карта местности» для новой админки (`/admin/index2.html`), чтобы быстро понимать *где что живёт*.

## Страница и подключаемые файлы

- `admin/index2.html` — разметка, IDs элементов, сетка панелей, sidebar, контейнеры для графиков/таблиц.
- `admin/admin2.css` — стили admin2 (панели, кнопки, таблицы, раскладка).
- `admin/admin2.js` — логика UI: переключение вкладок, загрузка данных, таблицы, фильтры, мини-графики, тренды “today vs yesterday”.
- `admin/chart-range.js` — большой линейный график **«Аналитика по диапазону»** (`#chart-range`) + панель дат/пресетов (`#range-from/#range-to/#range-apply`).
- `admin/chart.js` — большой столбчатый график **«Аналитика посещений»** (`#chart`).

## Главные блоки (views)

В `index2.html` каждый экран — это контейнер `#view-*`:

- `#view-summary` — сводка (карточки, большие графики).
- `#view-users` — пользователи (таблица + поиск/фильтры).
- `#view-duels` — дуэли (таблица + фильтры).
- `#view-topup` — ручные пополнения (таблица + фильтры).
- `#view-events` — события (таблица).
- `#view-unmerge` — расклейка HUM.

Переходы/сайдбар — в `admin2.js` (по `data-view` / id-шникам).

## Большие графики (то, что ты сейчас правил)

### «Аналитика по диапазону»
- DOM:
  - SVG: `#chart-range`
  - Inputs: `#range-from`, `#range-to`
  - Presets: кнопки `.chip[data-preset]`
  - Apply: `#range-apply`
- JS: `admin/chart-range.js`
- Типовые правки:
  - легенда/отступы/hover/tooltip → `chart-range.js`
  - раскладка контролов (чтобы не переносились) → `admin2.css` (блок `.summary-charts .panel-actions`) и/или `index2.html`

### «Аналитика посещений»
- DOM:
  - SVG: `#chart`
  - Badge справа сверху: «7 дней» (статический элемент в `index2.html`)
- JS: `admin/chart.js`
- Типовые правки:
  - формат подписей дат, ширина групп, лейблы значений → `chart.js`
  - отступы сверху/снизу, легенда → `chart.js` + иногда `admin2.css`

## Бэкендные источники данных (кратко)

Обе диаграммы и метрики используют `/api/admin/*` эндпоинты (см. `vercel2pr/src/routes_admin.js` и `docs/DEV_MAP.md` в backend-репо).

- Range chart тянет дневные ряды с бэка (авторизации/уникальные HUM).
- Visits chart тянет последние дни (авторизации/уникальные HUM).

(Если захочешь — дополним сюда точные поля ответа и примеры payload’ов.)
