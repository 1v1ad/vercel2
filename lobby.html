<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lobby</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <main class="container">
    <div class="card">
      <h1>–ü—Ä–∏–≤–µ—Ç! –ú—ã —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ 10 –¥–Ω–µ–π –±–µ—Å—Å–æ–Ω–Ω—ã—Ö –Ω–æ—á–µ–π! üéâ</h1>
      <p id="userLine" class="muted">–ü—Ä–æ–≤–µ—Ä—è—é —Å–µ—Å—Å–∏—é‚Ä¶</p>
      <a class="btn-outline" href="./index.html">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
  </main>

  <script>
    function getApiBase() { return (window.API_BASE) || ''; }
    fetch(getApiBase() + '/api/user/me', { credentials: 'include' })
      .then(r => r.ok ? r.json() : null)
      .then(data => {
        const el = document.getElementById('userLine');
        if (data && data.user) {
          el.textContent = `–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ ${data.user.firstName || ''} ${data.user.lastName || ''} (VK ID: ${data.user.vk_id}).`;
        } else {
          el.textContent = '–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏ –≤–æ–π–¥–∏—Ç–µ.';
        }
      })
      .catch(() => document.getElementById('userLine').textContent = '–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.');
  </script>
</body>
</html>
